## vi操作

命令模式下按`i`进入编辑模式
命令模式下按`:`进入底层命令模式
编辑模式按`ESC` 键进入命令模式
底层命令模式按 `ESC` 键进入命令模式

- 命令模式下

  - `ZZ`：保存文件并且退出（注意大写）
    `yy`：复制当前光标所在行（`nyy`:复制以当前光标为第一行到第n行）
    `p`：在光标下一行进行粘贴
    `dd`：删除光标所在行(ndd：借鉴nyy）
    `x`：删除当前光标所在字符
    `s`:删除光标所在字符，并且进入编辑模式（S:删除光标所在行，并且进入编辑模式）

    跳到尾行`shift+g`
    `gg`:跳转到文件头部首字符
    `G`:跳转到光标所在行首字符（nG:借鉴nyy）
    `$`:跳转到光标所在行尾字符（n$:借鉴nyy）
    `u`:撤销操作

- 底层命令模式下

  - 设置行号 `:set number` or `:set nu`，(只针对本次vi，默认开启需要在`/etc/virc`配置文件里面，将`set number`写入到文件尾部)
    取消行号 `:set nonumber` or `:set nonu`

  - w:保存文件到磁盘
    q:退出
    q!:强制退出不保存
    wq:保存并且退出

  - `:0` or `:1` 跳到第一行
    `:$`  跳到最后一行

  - 文本替换：
    s/old/new：替换光标所在行从左到右第一个old
    s/old/new/g：替换光标所在行所有的old
    %s/old/new/g：替换整个文档中的old为new

  - 文本查找：

    `/string` 从光标向下找内容为string的字符串(有多个只找第一个)

    `?string`从光标向上找

    找到string后，按n是从上往下找下一个string，按N是从下往上找上一个string

  - 

- 编辑模式

  

## linux常用命令

- 查找文件

  - find <查找的目录> -name 查询内容
  - which：查找PSATH环境变量中的可执行命令
  - whereis <某个命令>：查找该命令的可执行文件位置和帮助文件所在的位置

- cat
  命令用于连接文件并打印到标准输出设备上。

- ps命令 [选项]
  	-a：显示系统中所有进程的信息。
  	-e：显示所有进程的信息。
  	-f：显示进程的所有信息。
  	-l：以长格式显示进程信息。
  	-r：只显示正在运行的进程。
  	-u：显示面向用户的格式(包括用户名、CPU 及内存的使用情况等信息)。
  	-x：显示所有非控制终端上的进程信息。
  	-p：显示由进程 ID 指定的进程信息。
  	-t：显示指定终端上的进程信息。

- diff
  用于比较文件的差异。
  diff 以逐行的方式，比较文本文件的异同处。如果指定要比较目录，则 diff 会比较目录中相同文件名的文件，但不会比较其中子目录。

- 查看内存状态
  free \[-bkmotV][-s <间隔秒数>]  ：

  - -b 　以Byte为单位显示内存使用情况。

  - -k 　以KB为单位显示内存使用情况。

  - -m 　以MB为单位显示内存使用情况。

  - -h 　以合适的单位显示内存使用情况，最大为三位数，自动计算对应的单位值。单位有：

    ```
    B = bytes
    K = kilos
    M = megas
    G = gigas
    T = teras
    ```

  - -o 　不显示缓冲区调节列。

  - -s<间隔秒数> 　持续观察内存使用状况。

  - -t 　显示内存总和列。

  - -V 　显示版本信息。

- top
  动态地持续监听进程地运行状态，查看内存，孤儿进程僵尸进程等

- chmod
  授权，一般执行文件权限不够时使用

- grep
  文本集过滤，常用于查找文本等操作，支持模糊搜索

- ifconfig 查看IP地址等信息

- 创建软链接命令
  sudo ln -s 文件绝对路径 目的地址
  
- tail
  常用于查看日志文件

## linux定时任务crontab

- /var/spool/cron/ 目录下存放的是每个用户包括root的crontab任务，每个任务以创建者的名字命名。
- /etc/crontab 这个文件负责调度各种管理和维护任务。
- /etc/cron.d/ 这个目录用来存放任何要执行的crontab文件或脚本。
- 我们还可以把脚本放在/etc/cron.hourly、/etc/cron.daily、/etc/cron.weekly、/etc/cron.monthly目录中，让它每小时/天/星期、月执行一次。

```bash
#我们常用的命令如下：
crontab [-u username]　　　　#省略用户表表示操作当前用户的
    -e      (编辑工作表)
    -l      (列出工作表里的命令)
    -r      (删除工作)

我们用crontab -e进入当前用户的工作表编辑，是常见的vim界面。每行是一条命令。
crontab的命令构成为 时间+动作，其时间有分、时、日、月、周五种，操作符有

* 取值范围内的所有数字
/ 每过多少个数字
- 从X到Z
，散列数字

30 21 * * * echo "haha" #每天21:30输出haha
```

关闭定时任务

1.查询pid
ps aux

kill -9 对应pid 

## linux日志分割

```bash
#使用split命令分割大文件
split [] 文件地址 分割后新文件名的前缀 [--verbose]
verbose 表示显示进度条
-d 表示生成的新文件名 = 前缀+数字（不使用-d则默认生成的新文件以字母排序）
-l 按照命令行数进行分割（-l 10000 表示每个文件分割10000行）
-b 按照字节大小分割（-b 40m 表示以每个文件40mb进行分割进行）

#以每个文件50000行命令行进行分割
split -l 50000 mgr-0618.log new-file_1 --verbose 
#以每个文件40m进行分割
split -b 40m mgr-0618.log -d newfile_ --verbose

#cat命令合并文件 将所有前缀为newfile_的文件合并为一个新文件catfile.log
cat newfile_* > catfile.log
```

## 
